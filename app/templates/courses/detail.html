{% extends 'base.html' %}
{% block content %}
<div class="max-w-3xl mx-auto p-4">
  <div class="bg-white shadow rounded p-6">
    <div class="flex items-start justify-between">
      <div>
        <h1 class="text-2xl font-bold">{{ course.title }}</h1>
        <p class="text-gray-600 mt-1">{{ 'Live' if course.is_live else 'Pre-recorded' }}</p>
        <p class="mt-4 whitespace-pre-line">{{ course.description }}</p>
      </div>
    </div>

    <div class="mt-6">
      {% if current_user.is_authenticated %}
        {% if user_is_enrolled %}
          <span class="inline-block bg-green-100 text-green-800 px-3 py-1 rounded">You are enrolled âœ…</span>
        {% else %}
          <form method="POST" action="{{ url_for('courses.enroll', course_id=course.id) }}">
            <button class="bg-blue-600 text-white px-4 py-2 rounded">Enroll</button>
          </form>
        {% endif %}
      {% else %}
        <p class="text-gray-600">Please log in to enroll.</p>
      {% endif %}
    </div>

    {% if current_user.is_authenticated and current_user.is_admin %}
    <div class="mt-6 flex space-x-3">
      <a href="{{ url_for('courses.edit', course_id=course.id) }}" class="px-3 py-2 bg-yellow-500 text-white rounded">Edit</a>
      <form method="POST" action="{{ url_for('courses.delete', course_id=course.id) }}" onsubmit="return confirm('Delete this course?')">
        <button class="px-3 py-2 bg-red-600 text-white rounded">Delete</button>
      </form>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
