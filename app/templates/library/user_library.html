{% extends "base.html" %}
{% block content %}
<div class="max-w-3xl mx-auto p-6">
  <h1 class="text-2xl font-bold mb-4">User Library</h1>

  {% if current_user.is_authenticated %}
    <a href="{{ url_for('library.upload_user_pdf') }}" class="bg-blue-500 text-white px-3 py-2 rounded">Upload PDF</a>
  {% endif %}

  <ul class="mt-4 space-y-4">
    {% for pdf in pdfs %}
      <li class="bg-white shadow p-4 rounded">
        <h2 class="text-lg font-semibold">{{ pdf.title }}</h2>
        <p class="text-gray-600">{{ pdf.description }}</p>
        <p class="text-sm text-gray-500">Uploaded by {{ pdf.user.first_name }}</p>
        <a href="{{ url_for('library.download_pdf', kind='user', filename=pdf.filename) }}" class="text-blue-500">Download</a>
        {% if current_user.is_authenticated and (current_user.id == pdf.user_id or current_user.is_admin) %}
          <a href="{{ url_for('library.delete_pdf', kind='user', pdf_id=pdf.id) }}" class="text-red-500 ml-3">Delete</a>
        {% endif %}
      </li>
    {% else %}
      <p class="text-gray-500">No user PDFs yet.</p>
    {% endfor %}
  </ul>
</div>
{% endblock %}
